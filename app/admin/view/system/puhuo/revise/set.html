<style>
    body {
        background-color: #fff;
    }

     .layui-form-item .required:after {
        content: '*';
        color: red;
        position: absolute;
        margin-left: 4px;
        font-weight: bold;
        line-height: 1.8em;
        top: 6px;
        right: 5px;
    }

</style>
<div class="layuimini-container">
    <form id="app-form" class="layui-form" lay-filter="example">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label required">云仓</label>
                <div class="layui-input-inline">
                    <div id="xm-WarehouseName" class="xm-select"></div>
                </div>

            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-block">
                <label class="layui-form-label required">货号</label>
                <div class="layui-input-block">
                    <div id="xm-select" class="xm-select"></div>
                </div>

            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-block">
                <label class="layui-form-label">店铺</label>
                <div class="layui-input-block">
                    <div id="xm-CustomerName" class="xm-select"></div>
                </div>

            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-block">
                <label class="layui-form-label required">尺码</label>
                <div class="layui-input-block">
                    <div id="xm-size" class="xm-select"></div>
                </div>

            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label required">件数范围</label>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="number" name="min" lay-verify="required" placeholder="" autocomplete="off"
                           class="layui-input">
                </div>
                <div class="layui-form-mid">-</div>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="number" name="max" lay-verify="required" placeholder="" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label required">加减数值</label>
                <div class="layui-input-inline">
                    <input type="number" name="number" lay-verify="required" autocomplete="off"
                           class="layui-input demo-phone">
                </div>
            </div>
        </div>
        <div class="hr-line"></div>
        <div class="layui-form-item text-center" style="margin-bottom: 10px">
            <button type="submit" class="layui-btn" lay-submit="" lay-filter="sub">立即提交</button>
        </div>

    </form>
</div>
<script src="__STATIC__/plugs/lay-module/xmSelect/xm-select.js" charset="utf-8"></script>
<script>

    layui.use(['util', 'layer', 'form', 'table'], function () {
        var
            util = layui.util
            , layer = layui.layer
            , table = layui.table
            , form = layui.form
            , $ = layui.jquery
            , xm1
            , xm2
            , xm3
            , xm4;


        //提交事件
        form.on('submit(sub)', function (data) {
            let field = data.field

            if (!field.WarehouseName) {
                xm3.warning();
                return false
            }
            if (!field.GoodsNo) {
                xm1.warning();
                return false
            }
            if (!field.Size) {
                xm2.warning();
                return false
            }


            $.post('set_revise', data.field, function (res) {
                if (res.code == 1) {
                    var index = parent.layer.getFrameIndex(window.name);
                    parent.layer.close(index);
                    parent.layui.table.reload('table')
                    // parent.layer.close(index);
                    // parent.location.reload();
                } else {
                    layer.msg(res.msg, {icon: 2, time: 2000})

                }

            })
            return false;
        });

        let int_data = function () {
            $.get('getXmMapSelect?level=1', {}, function (res) {
                xm1 = xmSelect.render({
                    el: '#xm-select',
                    icon: 'show',
                    tips: '请选择',
                    // radio: true,
                    toolbar: {
                        show: true,
                    },
                    height: '320px',
                    direction: 'auto',
                    empty: '呀, 没有数据呢',
                    filterable: true,
                    theme: {
                        color: '#0081ff',
                    },
                    name: 'GoodsNo',
                    data: res.data.GoodsNo
                });

                xm2 = xmSelect.render({
                    el: '#xm-size',
                    icon: 'show',
                    tips: '请选择',
                    // radio: true,
                    toolbar: {
                        show: false,
                    },
                    height: '320px',
                    direction: 'auto',
                    empty: '呀, 没有数据呢',
                    filterable: true,
                    theme: {
                        color: '#0081ff',
                    },
                    name: 'Size',
                    data: res.data.Size
                });
                xm3 = xmSelect.render({
                    el: '#xm-WarehouseName',
                    icon: 'show',
                    tips: '请选择',
                    radio: true,
                    toolbar: {
                        show: false,
                    },
                    height: '320px',
                    direction: 'auto',
                    empty: '呀, 没有数据呢',
                    filterable: true,
                    theme: {
                        color: '#0081ff',
                    },
                    name: 'WarehouseName',
                    data: res.data.WarehouseName
                });
                xm4 = xmSelect.render({
                    el: '#xm-CustomerName',
                    icon: 'show',
                    tips: '请选择',
                    // radio: true,
                    toolbar: {
                        show: false,
                    },
                    height: '320px',
                    direction: 'auto',
                    empty: '呀, 没有数据呢',
                    filterable: true,
                    theme: {
                        color: '#0081ff',
                    },
                    name: 'CustomerName',
                    data: res.data.CustomerName
                });
                layui.form.render("select");
            });

        }
        int_data();
    })
</script>